@cover-bg: rgba(12, 0, 31, .85);
@close: #878293;

@degree: 60;
@time-out: 4;

.index-turntable {
  display: none;
  .cover {
    background: @cover-bg;
    text-align: center;
    position: fixed;
    height: 100%;
    width: 100%;
    z-index: 5;
    left: 0;
    top: 0;
    .prize-icon {
      margin-left: -8.675rem;
      position: absolute;
      bottom: 0;
      left: 50%;
    }
    .light-icon {
      text-align: center;
      .disc-bg-icon {
        position: relative;
        width: 23.25rem;
        margin: 0 auto;
        img {
          height: auto;
          width: 100%;
        }
      }
      .turntable {
        margin-left: -10.1rem;
        margin-top: -10.25rem;
        position: absolute;
        height: 20.2rem;
        width: 20.2rem;
        left: 50%;
        top: 50%;
        img {
          height: auto;
          width: 100%;
        }
        &.running {
          .start-animation(start-rotation, e("@{time-out}s"));
        }
        .stop-animation(360 / @degree);
      }
      .opt-btn {
        margin-left: -3.885rem;
        margin-top: -5rem;
        position: absolute;
        left: 50%;
        top: 50%;
      }
    }
    .close {
      position: absolute;
      right: 2rem;
      top: 4.6rem;
    }
  }
}

.stop-rotation(@degree, @num) {
  0% {
    transform: rotateZ(0);
  }
  100% {
    transform: rotateZ(750deg - @degree * @num);
  }
}

.stop-animation(@num: 0) when (isnumber(@num)) and (@num > 0) {
  @name: e("stop-animate-@{num}");

  &.stop-@{num} {
    -webkit-animation: @name 2s ease-out 1 forwards;
    -o-animation: @name 2s ease-out 1 forwards;
    animation: @name 2s ease-out 1 forwards;
  }
  @-webkit-keyframes @name {
    .stop-rotation(@degree, @num);
  }
  @-ms-keyframes @name {
    .stop-rotation(@degree, @num);
  }
  @-o-keyframes @name {
    .stop-rotation(@degree, @num);
  }
  @keyframes @name {
    .stop-rotation(@degree, @num);
  }
  .stop-animation(@num - 1);
}

.start-animation(@amt-name, @time) {
  -webkit-animation: @amt-name @time linear 1 forwards;
  -o-animation: @amt-name @time linear 1 forwards;
  animation: @amt-name @time linear 1 forwards;
}

.start-rotation() {
  0% {
    transform: rotateZ(0);
  }
  100% {
    transform: rotateZ(ceil(@time-out / .7) * 360deg);
  }
}

@-webkit-keyframes start-rotation {
  .start-rotation();
}

@-ms-keyframes start-rotation {
  .start-rotation();
}

@-o-keyframes start-rotation {
  .start-rotation();
}

@keyframes start-rotation {
  .start-rotation();
}

html.no-scroll {
  overflow: hidden;
  height: 100%;
  body {
    overflow: hidden;
    height: 100%;
  }
}

.disc-icon {
  background: url(../images/disc-icon.png) no-repeat;
  display: inline-block;
  &.light-icon {
    vertical-align: middle;
    background-position: 0 0;
    background-size: 100%;
    height: 33.25rem;
    width: 100%;
  }
  &.prize-icon {
    background-position: 0 -67.1rem;
    background-size: 155.5%;
    height: 8.45rem;
    width: 17.35rem;
  }
  &.disc-bg-icon {
    background-position: 0 -33.8rem;
    background-size: 116.3%;
    width: 23.25rem;
    height: 24rem;
  }
  &.pointer-icon {
    background-position: -0.05rem -58.1rem;
    background-size: 348.22%;
    height: 8.9rem;
    width: 7.77rem;
  }
  &.pointer-run-icon {
    background-position: -8.2rem -56.7rem;
    background-size: 340%;
    height: 8.9rem;
    width: 7.77rem;
  }
  &.pointer-action-icon {
    background-position: -17.4rem -58.1rem;
    background-size: 348.22%;
    height: 8.9rem;
    width: 7.77rem;
  }
  &.close-icon {
    background-position: -7.5rem -28.6rem;
    background-size: 550%;
    height: 2.1rem;
    width: 2.1rem;
  }
}
